#!/usr/bin/env bash
cd "$(dirname "${0}")"

menu(){
  while :
  do
    clear
    echo -ne "

███████╗██████╗ ███████╗███████╗██████╗ ███████╗██████╗
██╔════╝██╔══██╗██╔════╝██╔════╝██╔══██╗██╔════╝██╔══██╗
█████╗  ██████╔╝█████╗  █████╗  ██████╔╝███████╗██║  ██║
██╔══╝  ██╔══██╗██╔══╝  ██╔══╝  ██╔══██╗╚════██║██║  ██║
██║     ██║  ██║███████╗███████╗██████╔╝███████║██████╔╝
╚═╝     ╚═╝  ╚═╝╚══════╝╚══════╝╚═════╝ ╚══════╝╚═════╝

0) Update All (reboots)
u) User Software
g) Git Repos
s) Add SSH Keys

Select Step:  "
    read -r step
    case $step in
      u) user_software ;;
      g) git_repos ;;
      s) add_ssh_keys ;;
      0) update_all;;
      *)
        echo "Not a valid option"
        exit 1
        ;;
    esac
  done
}

git_repos(){
  mkdir -p $HOME/Source
  mkdir -p $HOME/Source/gitlab.com/
  mkdir -p $HOME/Source/github.com/

  git clone git@github.com:jeffwindsor/startpage.git $HOME/Source/github.com/jeffwindsor/startpage
}

add_ssh_keys(){
  if [[ ! -f id_ed25519 ]]; then
    ssh-keygen -t ed25519 -C "jeff.windsor@gmail.com"
    ssh-agent -s
    ssh-add -k id_ed25519
    echo "== added ssh key: id_ed25519"
    cat id_ed25519.pub
  fi
}

update_all(){
  freebsd-update fetch install
  pkg update
  pkg upgrade -y
  #pkg install -y beadm
  reboot
}

user_software(){
  pkg install -y desktop-installer

  pkg install -y alacritty
  pkg install -y bat
  pkg install -y chezmoi
  pkg install -y chromium firefox
  pkg install -y exa
  pkg install -y fd-find
  pkg install -y fortune-mod-freebsd-classic
  pkg install -y fzf
  pkg install -y git
  pkg install -y helix
  pkg install -y hs-hledger hs-ledger-ui hs-hledger-web
  pkg install -y neovim
  pkg install -y megacmd
  pkg install -y ripgrep
  pkg install -y starship
  pkg install -y spotify-tui
  pkg install -y tealdeer

  #pkg install -y topgrade
  #pkg install -y rust rust-analyzer
  #pkg install -y lazygit gitui
  #pkg install -y zeal
}

menu
